import { useState, useEffect } from 'react';

export default function OsmoseXpertSite() {
  const cfg = {
    brand: "OsmoseXpert",
    tagline: "Streeploos schoon met puur osmosewater",
    // Gebruik een RELATIEF pad zodat het ook werkt op GitHub Pages project sites (geen leading slash)
    logoUrl: "assets/osmosexpert-logo.png",
    phone: "0493/67.34.84",
    email: "Info@osmose-xpert.be",
    baseVisitFee: 50,
    serviceArea: [
      "Ronse",
      "Oudenaarde",
      "Kluisbergen",
    ],
  };
  const [logoOk, setLogoOk] = useState(true);
  const [showThanks, setShowThanks] = useState(false);

  const nav = [
    { label: "Home", href: "#home" },
    { label: "Diensten", href: "#diensten" },
    { label: "Werkwijze", href: "#werkwijze" },
    { label: "Regio", href: "#regio" },
    { label: "FAQ", href: "#faq" },
    { label: "Contact", href: "#contact" },
  ];

  const services = [
    {
      title: "Ramen & Glasgevels",
      desc: "Buitenreiniging met water-fed pole (tot 3 verdiepingen) en klassieke trekker waar nodig.",
      icon: (
        <svg viewBox="0 0 24 24" className="w-6 h-6" aria-hidden="true">
          <rect x="3" y="3" width="18" height="18" rx="1" ry="1" fill="none" stroke="currentColor" strokeWidth="2"/>
          <line x1="12" y1="3" x2="12" y2="21" stroke="currentColor" strokeWidth="2"/>
          <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" strokeWidth="2"/>
        </svg>
      ),
    },
    {
      title: "Zonnepanelen",
      desc: "Veilig reinigen met osmosewater voor maximaal rendement, zonder agressieve producten.",
      icon: (
        <svg viewBox="0 0 24 24" className="w-6 h-6" aria-hidden="true">
          <rect x="3" y="8" width="14" height="9" rx="1" fill="none" stroke="currentColor" strokeWidth="2"/>
          <line x1="3" y1="12" x2="17" y2="12" stroke="currentColor" strokeWidth="1.5"/>
          <line x1="7" y1="8" x2="7" y2="17" stroke="currentColor" strokeWidth="1.5"/>
          <circle cx="19" cy="6" r="3" fill="none" stroke="currentColor" strokeWidth="2"/>
        </svg>
      ),
    },
    {
      title: "Veranda & Serre",
      desc: "Glas en profielen, inclusief moeilijk bereikbare zones met verlengde poles.",
      icon: (
        <svg viewBox="0 0 24 24" className="w-6 h-6" aria-hidden="true">
          <path d="M4 10L12 5l8 5v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z" fill="none" stroke="currentColor" strokeWidth="2"/>
          <path d="M6 12h12" stroke="currentColor" strokeWidth="2"/>
          <path d="M8 12v6M12 12v6M16 12v6" stroke="currentColor" strokeWidth="1.5"/>
        </svg>
      ),
    },
    {
      title: "Opritten & Afspoelwerken",
      desc: "Algemene afspoelwerken met osmosewater. (Geen softwash/chemische behandelingen)",
      icon: (
        <svg viewBox="0 0 24 24" className="w-6 h-6" aria-hidden="true">
          <path d="M12 3c2.8 0 5 2.2 5 5 0 3-5 10-5 10S7 11 7 8c0-2.8 2.2-5 5-5z" fill="none" stroke="currentColor" strokeWidth="2"/>
          <path d="M16 7h5M16 9h4M16 11h3" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
        </svg>
      ),
    },
  ];

  const faqs = [
    {
      q: "Wat is osmosewater en waarom is het beter?",
      a: "Osmosewater is gefilterd tot bijna 0 ppm mineralen. Daardoor laat het na het drogen geen kalk- of zeepresten achter: streeploos resultaat zonder agressieve middelen.",
    },
    {
      q: "Droogt glas altijd meteen streeploos op?",
      a: "Bij koud of zeer vochtig weer kan het langer duren voor druppels volledig opdrogen. We informeren je vooraf en werken met een aangepaste planning/techniek rond ingangen.",
    },
    {
      q: "Waarom een basisbedrag?",
      a: `Bij boeking geldt Basis €${cfg.baseVisitFee} (incl. btw) voor intake, verplaatsing en planning. Gaan we aan de slag, dan wordt dit volledig verrekend in de totaalprijs. Dit is het minimumbedrag per interventie - ook bij zeer kleine opdrachten (bv. één raam).`,
    },
    {
      q: "Doen jullie softwash?",
      a: "Nee. We reinigen met osmosewater (veilig voor glas, profielen en panelen) en doen geen chemische softwash-behandelingen.",
    },
    {
      q: "Water bij ingangen: wordt het nat en glad?",
      a: "We werken rond openingsuren waar mogelijk, gebruiken matten en beperken waternevel bij in- en uitgangen. Veiligheid en netheid eerst.",
    },
  ];

  // --- Handlers ---
  // --- Formsuccess + dynamic redirect for FormSubmit ---
  useEffect(() => {
    if (typeof window === "undefined") return;
    const url = new URL(window.location.href);
    if (url.hash === "#bedankt" || url.searchParams.get("bedankt") === "1") {
      setShowThanks(true);
    }
    const next = document.getElementById("fs-next");
    if (next) next.setAttribute("value", url.origin + url.pathname + "#bedankt");
  }, []);

  return (
    <div className="min-h-screen bg-white text-neutral-900" id="home">
      {/* Header */}
      <header className="sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-neutral-200">
        <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            {logoOk ? (
              <img src={cfg.logoUrl} alt={`${cfg.brand} logo`} className="h-10 w-auto rounded-[10px]" loading="eager" decoding="async" onError={() => setLogoOk(false)} />
            ) : (
              <div className="w-9 h-9 rounded-2xl bg-sky-600 text-white grid place-items-center font-bold">OX</div>
            )}
            <div>
              <div className="font-bold text-lg leading-none">{cfg.brand}</div>
              <div className="text-xs text-sky-600">{cfg.tagline}</div>
            </div>
          </div>
          <nav className="hidden md:flex items-center gap-6 text-sm">
            {nav.map((item) => (
              <a key={item.href} href={item.href} className="hover:text-sky-700">
                {item.label}
              </a>
            ))}
            <a href="#contact" className="inline-flex items-center gap-2 rounded-full px-4 py-2 border border-sky-700 text-sky-700 hover:bg-sky-700 hover:text-white transition">
              <span>Offerte aanvragen</span>
              <svg viewBox="0 0 24 24" className="w-4 h-4" aria-hidden="true"><path fill="currentColor" d="M5 12h12l-4-4 1.4-1.4L21.8 12l-7.4 5.4L13 16z"/></svg>
            </a>
          </nav>
          <div className="md:hidden flex items-center gap-2">
            <a href="#contact" className="inline-flex items-center gap-2 rounded-full px-4 py-2 border border-sky-700 text-sky-700 hover:bg-sky-700 hover:text-white transition">
              <span>Contact</span>
            </a>
            <details className="relative">
              <summary className="list-none inline-flex items-center gap-2 rounded-full px-3 py-2 border border-sky-200 text-sky-800 cursor-pointer">
                <svg viewBox="0 0 24 24" className="w-5 h-5" aria-hidden="true"><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
                <span>Menu</span>
              </summary>
              <div className="absolute right-0 mt-2 w-56 rounded-xl border border-neutral-200 bg-white shadow-lg p-2">
                {nav.map((item) => (
                  <a key={item.href} href={item.href} className="block px-3 py-2 rounded-lg text-sm hover:bg-sky-50 hover:text-sky-800">
                    {item.label}
                  </a>
                ))}
              </div>
            </details>
          </div>
        </div>
      </header>

      {/* Hero */}
      <section className="relative overflow-hidden">
        <div className="max-w-6xl mx-auto px-4 py-16 md:py-24 grid md:grid-cols-2 gap-12 items-center">
          <div>
            <h1 className="text-3xl md:text-5xl font-extrabold tracking-tight">Kraakheldere ramen. <span className="text-neutral-500">Zonder gedoe.</span></h1>
            <p className="mt-5 text-lg text-neutral-700 leading-relaxed">
              {cfg.brand} reinigt ramen, glasgevels, veranda's en zonnepanelen met <strong>puur osmosewater</strong>.
              Geen zeepresten, geen krassen - wel een duurzaam, streeploos resultaat.
            </p>
            <div className="mt-6 flex flex-wrap items-center gap-3">
              <a href="#contact" className="rounded-full px-5 py-3 bg-sky-600 text-white hover:bg-sky-700 hover:-translate-y-0.5 transition w-full sm:w-auto text-center">Gratis & vrijblijvende offerte</a><span className="block w-full text-xs text-neutral-500">€{cfg.baseVisitFee} minimumbedrag per interventie - verrekend bij uitvoering. <a href="#faq" className="underline hover:text-neutral-700">(zie FAQ)</a></span>
            </div>
            <ul className="mt-6 grid sm:grid-cols-2 gap-3 text-sm text-neutral-700">
              <li className="flex items-center gap-2"><Dot className="text-sky-600"/> Streeploos: osmosewater (0 ppm)</li>
              <li className="flex items-center gap-2"><Dot className="text-sky-600"/> Veilig tot 3 verdiepingen</li>
              <li className="flex items-center gap-2"><Dot className="text-sky-600"/> Residentieel & commercieel</li>
              <li className="flex items-center gap-2"><Dot className="text-sky-600"/> Geen softwash/chemische baden</li>
            </ul>
          </div>
          <div className="relative">
            <div className="aspect-[4/3] relative overflow-hidden rounded-2xl border border-neutral-200 shadow">
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Window_cleaning_with_a_pole_in_bath_arp.jpg/1600px-Window_cleaning_with_a_pole_in_bath_arp.jpg"
                alt="Close-up: water-fed pole tegen glasgevel (actie)"
                className="w-full h-full object-cover md:scale-100 scale-[1.12]"
                style={{ objectPosition: "70% center" }}
                loading="lazy"
                decoding="async"
                onError={(e) => { e.currentTarget.onerror = null; e.currentTarget.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Long-window-pole.jpg/1600px-Long-window-pole.jpg"; }}
              />
            </div>
            <p className="text-[10px] text-neutral-400 mt-2">Foto: Adrian Pingstone (Arpingstone) - <a className="underline" href="https://commons.wikimedia.org/wiki/File:Window_cleaning_with_a_pole_in_bath_arp.jpg" target="_blank" rel="noopener noreferrer">Wikimedia Commons</a> (Public Domain). Fallback: Solarence - <a className="underline" href="https://commons.wikimedia.org/wiki/File:Long-window-pole.jpg" target="_blank" rel="noopener noreferrer">Wikimedia Commons</a> (CC BY 4.0).</p>
          </div>
        </div>
      </section>

      {/* Diensten */}
      <section id="diensten" className="bg-sky-50 border-y border-sky-100 scroll-mt-24">
        <div className="max-w-6xl mx-auto px-4 py-14">
          <h2 className="text-2xl md:text-3xl font-bold">Diensten</h2>
          
          <div className="mt-8 grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {services.map((s) => (
              <div key={s.title} className="rounded-2xl border border-neutral-200 p-5 bg-white hover:shadow-sm">
                <div className="w-10 h-10 rounded-xl bg-sky-600 text-white grid place-items-center mb-4">
                  {s.icon}
                </div>
                <h3 className="font-semibold">{s.title}</h3>
                <p className="text-sm text-neutral-700 mt-2">{s.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Werkwijze */}
      <section id="werkwijze" className="scroll-mt-24">
        <div className="max-w-6xl mx-auto px-4 py-14">
          <h2 className="text-2xl md:text-3xl font-bold">Onze werkwijze</h2>
          <ol className="mt-6 grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-sm">
            <Step idx={1} title="Kennismaking & offerte">
              Korte call of mail, foto's zijn welkom. We plannen desgewenst een bezoek (Basis €{cfg.baseVisitFee} incl. btw, verrekend).
            </Step>
            <Step idx={2} title="Planning zonder overlast">
              We stemmen af op openingstijden en beperken water bij ingangen.
            </Step>
            <Step idx={3} title="Reiniging met osmosewater">
              Water-fed pole voor hoogte, klassiek waar nodig. Profielen en randen inbegrepen.
            </Step>
            <Step idx={4} title="Check & nazorg">
              We lopen alles na, geven tips voor onderhoud en plannen opvolgbeurten indien gewenst.
            </Step>
          </ol>
        </div>
      </section>

      {/* Regio */}
      <section id="regio" className="bg-sky-50 border-y border-sky-100 scroll-mt-24">
        <div className="max-w-6xl mx-auto px-4 py-14">
          <h2 className="text-2xl md:text-3xl font-bold">Werkregio</h2>
          <div className="mt-2 flex flex-wrap gap-2">
            {cfg.serviceArea.map((city) => (
              <span key={city} className="text-sm rounded-full border border-sky-200 text-sky-800 px-3 py-1">{city}</span>
            ))}
          </div>
          <p className="mt-6 text-neutral-700">Basisregio vanuit Ronse. Grotere projecten elders in overleg.</p>
        </div>
      </section>

      {/* FAQ */}
      <section id="faq" className="scroll-mt-24">
        <div className="max-w-6xl mx-auto px-4 py-14">
          <h2 className="text-2xl md:text-3xl font-bold">Veelgestelde vragen</h2>
          <div className="mt-8 grid md:grid-cols-2 gap-6">
            {faqs.map((f) => (
              <div key={f.q} className="rounded-2xl border border-neutral-200 p-5">
                <h3 className="font-semibold">{f.q}</h3>
                <p className="text-sm text-neutral-700 mt-2 leading-relaxed">{f.a}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Contact */}
      <section id="contact" className="bg-sky-900 text-white scroll-mt-24">
        <div className="max-w-6xl mx-auto px-4 py-16 grid md:grid-cols-2 gap-12 items-start">
          <div>
            {showThanks && (
              <div className="mb-4 rounded-xl border border-emerald-400 bg-emerald-50 text-emerald-800 px-4 py-3 text-sm">
                Bedankt! Je aanvraag is verzonden. We antwoorden snel via e-mail of WhatsApp.
              </div>
            )}
            <h2 className="text-2xl md:text-3xl font-bold flex items-center gap-3">{logoOk && (<img src={cfg.logoUrl} alt="" aria-hidden="true" className="h-7 w-auto hidden sm:block" onError={() => setLogoOk(false)} />)}<span>Vraag je gratis offerte aan</span></h2>
            <p className="mt-3 text-neutral-300">Vertel kort wat je wil laten reinigen en voeg gerust foto's toe bij je e-mail. We antwoorden snel.</p>
            <ul className="mt-6 space-y-2 text-sm">
              <li className="flex items-center gap-2"><Phone/> <a href={`tel:${toTel(cfg.phone)}`} className="hover:underline">{cfg.phone}</a></li>
              <li className="flex items-center gap-2"><Mail/> <a href={`mailto:${cfg.email}`} className="hover:underline">{cfg.email}</a></li>
              <li className="flex items-center gap-2"><WhatsApp className="text-[#25D366]"/> <a href={toWhatsApp(cfg.phone)} target="_blank" rel="noopener noreferrer" className="hover:underline">WhatsApp (snelste)</a></li>
            </ul>
            <p className="mt-6 text-xs text-neutral-400">* Basis €{cfg.baseVisitFee} incl. btw. (minimum bedrag per interventie). Bij uitvoering verrekend in de totaalprijs.</p>
          </div>
          {/* Netlify-ready + mailto fallback */}
          <form name="offerte" method="POST" action="https://formsubmit.co/Info@osmose-xpert.be" className="bg-sky-800/50 border border-sky-700 rounded-2xl p-6">
            <div className="grid gap-4">
              <input type="hidden" name="_subject" value="Offerte-aanvraag via website" />
              <input type="hidden" name="_template" value="table" />
              <input type="hidden" name="_captcha" value="true" />
              <input type="text" name="_honey" className="hidden" tabIndex={-1} autoComplete="off" />
              <input type="hidden" name="_next" id="fs-next" />
              <Input label="Naam" name="naam" placeholder="Voor- en achternaam" required/>
              <Input label="E-mail" name="email" type="email" placeholder="jij@voorbeeld.be" required/>
              <Input label="Telefoon" name="telefoon" type="tel" placeholder="0499 00 00 00" pattern="[0-9 +()./\-]{8,}" required/>
              <div>
                <label className="text-sm">Bericht</label>
                <textarea
                  name="bericht"
                  className="mt-1 w-full rounded-xl bg-white text-neutral-900 border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-300 min-h-[120px]"
                  placeholder="Beschrijf kort je pand en wat je wil laten reinigen…"
                  required
                />
              </div>
              <button className="rounded-xl px-4 py-3 bg-white text-neutral-900 hover:-translate-y-0.5 transition text-sm font-semibold">Verstuur</button>
              <p className="text-xs text-neutral-300">Dit formulier stuurt je bericht rechtstreeks naar Info@osmose-xpert.be via een beveiligde formulierdienst. Je ziet een bevestiging na verzenden.</p>
            </div>
          </form>
        </div>
      </section>
      {/* Mobile sticky CTA (mobile only) */}
      <div className="md:hidden fixed bottom-3 left-0 right-0 z-40">
        <div className="max-w-6xl mx-auto px-4">
          <div className="rounded-full shadow-lg border border-sky-200 bg-white overflow-hidden flex divide-x divide-sky-200">
            <a href={`tel:${toTel(cfg.phone)}`} className="flex-1 py-3 text-center font-medium">Bel ons</a>
            <a href={toWhatsApp(cfg.phone)} target="_blank" rel="noopener noreferrer" className="flex-1 py-3 text-center font-medium">WhatsApp</a>
            <a href="#contact" className="flex-1 py-3 text-center font-semibold bg-sky-600 text-white hover:bg-sky-700">Offerte</a>
          </div>
        </div>
      </div>

      {/* Footer */}
      <footer className="border-t border-neutral-200">
        <div className="max-w-6xl mx-auto px-4 py-8 text-sm text-neutral-600 flex flex-col md:flex-row items-start md:items-center justify-between gap-3">
          <div className="flex items-center gap-3">
            {logoOk ? (
            <img src={cfg.logoUrl} alt={`${cfg.brand} logo`} className="h-8 w-auto rounded-lg" onError={() => setLogoOk(false)} />
          ) : (
            <div className="w-8 h-8 rounded-xl bg-sky-600 text-white grid place-items-center font-bold">OX</div>
          )}
            <div>
              <div className="font-semibold">{cfg.brand}</div>
              <div className="text-xs">Ramen, glasgevels & zonnepanelen</div>
            </div>
          </div>
          <div className="text-xs">© {new Date().getFullYear()} {cfg.brand}. Alle rechten voorbehouden.</div>
        </div>
      </footer>
    </div>
  );
}

function Dot({ className = "" }) {
  return (
    <svg viewBox="0 0 24 24" className={`w-4 h-4 ${className}`} aria-hidden="true"><circle cx="12" cy="12" r="4" fill="currentColor"/></svg>
  );
}

function Step({ idx, title, children }) {
  return (
    <li className="rounded-2xl border border-neutral-200 p-5 bg-white">
      <div className="flex items-center gap-3">
        <div className="w-8 h-8 rounded-full bg-sky-600 text-white grid place-items-center text-sm font-bold">{idx}</div>
        <h3 className="font-semibold">{title}</h3>
      </div>
      <p className="mt-3 text-neutral-700">{children}</p>
    </li>
  );
}

function Input({ label, ...props }) {
  return (
    <div>
      <label className="text-sm">{label}</label>
      <input {...props} className="mt-1 w-full rounded-xl bg-neutral-950 md:bg-white md:text-neutral-900 text-white border border-neutral-800 md:border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-300" />
    </div>
  );
}

function Phone() {
  return (
    <svg viewBox="0 0 24 24" className="w-5 h-5" aria-hidden="true"><path fill="currentColor" d="M6.62 10.79a15.91 15.91 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.05-.24 11.36 11.36 0 0 0 3.56.57 1 1 0 0 1 1 1v3.61a1 1 0 0 1-1 1A17 17 0 0 1 3 5a1 1 0 0 1 1-1h3.61a1 1 0 0 1 1 1 11.36 11.36 0 0 0 .57 3.56 1 1 0 0 1-.24 1.05z"/></svg>
  );
}

function Mail() {
  return (
    <svg viewBox="0 0 24 24" className="w-5 h-5" aria-hidden="true"><path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 1 2-2V6a2 2 0 0 0-2-2m0 4-8 5-8-5V6l8 5 8-5z"/></svg>
  );
}

function toTel(v) {
  const d = String(v || "").replace(/[^0-9]/g, "");
  if (!d) return "";
  // 0032..., +32..., 0...
  if (d.startsWith("0032")) return "+" + d.slice(2);
  if (d.startsWith("32")) return "+" + d;
  if (d.startsWith("0")) return "+32" + d.slice(1);
  return "+" + d; // fallback
}

function toWhatsApp(v) {
  const d = String(v || "").replace(/[^0-9]/g, "");
  if (!d) return "#";
  let intl = d.startsWith("0032") ? d.slice(2) : (d.startsWith("32") ? d : (d.startsWith("0") ? "32" + d.slice(1) : d));
  if (!intl.startsWith("32")) intl = "32" + intl;
  return "https://wa.me/" + intl;
}

function WhatsApp({ className = "" }) {
  // Official-style WhatsApp glyph (currentColor). For brand-green use className="text-[#25D366]".
  return (
    <svg viewBox="0 0 24 24" className={`w-5 h-5 ${className}`} aria-hidden="true" focusable="false">
      <path fill="currentColor" d="M20.52 3.48A11.85 11.85 0 0 0 12.07 0C5.46 0 .11 5.35.11 11.96A11.85 11.85 0 0 0 12 23.83h.01c2.02 0 3.99-.52 5.73-1.51l4.2 1.1-1.12-4.09a11.87 11.87 0 0 0 1.69-6.14 11.85 11.85 0 0 0-3.99-8.71Zm-8.51 17.65H12C6.98 21.13 2.89 17.04 2.89 12.02 2.89 7 6.98 2.91 12 2.91c2.43 0 4.72.95 6.44 2.67a9.07 9.07 0 0 1 2.67 6.43c0 1.91-.57 3.71-1.65 5.24l-.24.35.67 2.45-2.52-.66-.33.2a9.07 9.07 0 0 1-4.04.95ZM17.1 14.27c-.28-.14-1.67-.82-1.93-.91-.26-.1-.45-.14-.64.14-.19.28-.73.91-.9 1.09-.17.19-.33.21-.61.07-.28-.14-1.19-.44-2.26-1.41-.83-.74-1.39-1.65-1.56-1.93-.17-.28-.02-.43.12-.57.13-.13.28-.33.42-.49.14-.16.19-.28.28-.47.09-.19.05-.35-.02-.49-.07-.14-.64-1.55-.88-2.12-.23-.58-.47-.49-.64-.5-.16-.01-.35-.01-.54-.01-.19 0-.49.07-.74.35-.26.28-1.01.98-1.01 2.39s1.04 2.77 1.19 2.96c.14.19 2.05 3.13 4.95 4.39.69.3 1.23.47 1.65.6.69.22 1.32.19 1.82.12.56-.08 1.67-.68 1.91-1.34.24-.66.24-1.22.17-1.34-.06-.12-.23-.19-.5-.33Z"/>
    </svg>
  );
}

// ---- Lightweight self-tests (dev only) ----
if (typeof window !== "undefined" && !window.__OX_TESTED__) {
  window.__OX_TESTED__ = true;
  try {
    console.assert(toTel("0493/67.34.84") === "+32493673484", "toTel should convert local BE to +32 format");
    console.assert(toTel("+32493673484") === "+32493673484", "toTel should keep + format");
    console.assert(toTel("0032493673484") === "+32493673484", "toTel should accept 0032- format");
    console.assert(toWhatsApp("0493/67.34.84").endsWith("32493673484"), "toWhatsApp should strip and prefix country code");
    console.assert(Array.isArray(cfg.serviceArea) && cfg.serviceArea.includes("Ronse"), "serviceArea should contain Ronse");
  } catch (e) {
    console.warn("Self-tests failed", e);
  }
}
